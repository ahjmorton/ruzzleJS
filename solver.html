<!DOCTYPE HTML>
<html>
    <head>
        <script>
            "use strict"
            var App = function() {
                var WORDLIST_FILE = "worker.js";
                return {
                    start : function() {
                        var wordList = document.getElementById("wordList");
                        var addToList = function(msgData) {
                            var li = document.createElement("li");
                            li.appendChild(document.createTextNode(msgData.data));
                            wordList.appendChild(li);
                        };
                        var theGrid = ['a','y','r','p','k','l','u','b','o','t','s','h','c','v','m','i'];
                        var gridded = theGrid.reduce(function(previousValue, nextValue, index, array) {
                            if(index % 4 === 0) { 
                                previousValue.push([nextValue]);
                            }
                            else {
                                previousValue[previousValue.length - 1].push(nextValue);
                            }
                            return previousValue;
                        }, []);
                        for(var i = 0; i < theGrid.length; i++) {
                            var worker = new Worker(WORDLIST_FILE);
                            worker.postMessage({cmd:"start",grid:gridded, letter:theGrid[i]});
                            worker.addEventListener('message', addToList);
                        }
                    }
                };
            }();
            window.onload=App.start;
        </script>
    </head>
    <body>
        <h1>Generated words</h1>
        <ul id="wordList">
        </ul>
    </body>
</html>
